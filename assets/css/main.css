@import "tailwindcss";
@plugin "@tailwindcss/typography";
@source "hugo_stats.json";
@custom-variant dark (&:where(.dark, .dark *));
/* 基础主题变量 */
:root {
  /* shadcn主题 (默认) */
  --color-primary: oklch(0.205 0 0);
  --color-primary-foreground: oklch(0.985 0 0);
  --color-secondary: oklch(0.97 0 0);
  --color-secondary-foreground: oklch(0.205 0 0);
  --color-accent: oklch(0.97 0 0);
  --color-accent-foreground: oklch(0.205 0 0);
  --color-background: oklch(1 0 0);
  --color-foreground: oklch(0.145 0 0);
  --color-muted: oklch(0.97 0 0);
  --color-muted-foreground: oklch(0.556 0 0);
  --color-border: oklch(0.922 0 0);
  --color-card: oklch(1 0 0);
  --color-card-foreground: oklch(0.145 0 0);
  --color-popover: oklch(1 0 0);
  --color-popover-foreground: oklch(0.145 0 0);

  /* Alert 颜色变量 */
  --color-note: oklch(0.61 0.15 252.5);
  --color-tip: oklch(0.61 0.15 162.48);
  --color-important: oklch(0.61 0.15 39.04);
  --color-warning: oklch(0.61 0.15 85.87);
  --color-caution: oklch(0.61 0.15 12.57);
}

/* 暗色模式基础变量 */
.dark {
  --color-primary: oklch(0.922 0 0);
  --color-primary-foreground: oklch(0.205 0 0);
  --color-secondary: oklch(0.269 0 0);
  --color-secondary-foreground: oklch(0.985 0 0);
  --color-accent: oklch(0.371 0 0);
  --color-accent-foreground: oklch(0.985 0 0);
  --color-background: oklch(0.145 0 0);
  --color-foreground: oklch(0.985 0 0);
  --color-muted: oklch(0.269 0 0);
  --color-muted-foreground: oklch(0.708 0 0);
  --color-border: oklch(1 0 0 / 10%);
  --color-card: oklch(0.205 0 0);
  --color-card-foreground: oklch(0.985 0 0);
  --color-popover: oklch(0.269 0 0);
  --color-popover-foreground: oklch(0.985 0 0);

  /* Alert 颜色变量 - 暗色模式 */
  --color-note: oklch(0.67 0.15 252.5);
  --color-tip: oklch(0.67 0.15 162.48);
  --color-important: oklch(0.67 0.15 39.04);
  --color-warning: oklch(0.67 0.15 85.87);
  --color-caution: oklch(0.67 0.15 12.57);
}

/* Claude 主题 */
[data-theme="claude"] {
  --color-primary: oklch(0.62 0.14 39.04);
  --color-primary-foreground: oklch(1.00 0 0);
  --color-secondary: oklch(0.92 0.01 92.99);
  --color-secondary: oklch(0.92 0.01 92.99);
  --color-secondary-foreground: oklch(0.43 0.02 98.60);
  --color-accent: oklch(0.92 0.01 92.99);
  --color-accent-foreground: oklch(0.27 0.02 98.94);
  --color-background: oklch(0.98 0.01 95.10);
  --color-foreground: oklch(0.34 0.03 95.72);
  --color-muted: oklch(0.93 0.02 90.24);
  --color-muted-foreground: oklch(0.61 0.01 97.42);
  --color-border: oklch(0.88 0.01 97.36);
  --color-card: oklch(0.98 0.01 95.10);
  --color-card-foreground: oklch(0.19 0.00 106.59);
  --color-popover: oklch(1.00 0 0);
  --color-popover-foreground: oklch(0.27 0.02 98.94);

  /* Alert 颜色变量 - Claude 主题 */
  --color-note: oklch(0.61 0.15 252.5);
  --color-tip: oklch(0.61 0.15 162.48);
  --color-important: oklch(0.62 0.14 39.04);
  --color-warning: oklch(0.61 0.15 85.87);
  --color-caution: oklch(0.61 0.15 12.57);
}

[data-theme="claude"].dark {
  --color-primary: oklch(0.67 0.13 38.76);
  --color-primary-foreground: oklch(1.00 0 0);
  --color-secondary: oklch(0.98 0.01 95.10);
  --color-secondary-foreground: oklch(0.31 0.00 106.60);
  --color-accent: oklch(0.21 0.01 95.42);
  --color-accent-foreground: oklch(0.97 0.01 98.88);
  --color-background: oklch(0.27 0.00 106.64);
  --color-foreground: oklch(0.81 0.01 93.01);
  --color-muted: oklch(0.22 0.00 106.71);
  --color-muted-foreground: oklch(0.77 0.02 99.07);
  --color-border: oklch(0.36 0.01 106.89);
  --color-card: oklch(0.27 0.00 106.64);
  --color-card-foreground: oklch(0.98 0.01 95.10);
  --color-popover: oklch(0.31 0.00 106.60);
  --color-popover-foreground: oklch(0.92 0.00 106.48);

  /* Alert 颜色变量 - Claude 暗色模式 */
  --color-note: oklch(0.67 0.15 252.5);
  --color-tip: oklch(0.67 0.15 162.48);
  --color-important: oklch(0.67 0.13 38.76);
  --color-warning: oklch(0.67 0.15 85.87);
  --color-caution: oklch(0.67 0.15 12.57);
}

/* Emerald 主题 */
[data-theme="emerald"] {
  --color-primary: oklch(0.61 0.15 162.48);
  --color-primary-foreground: oklch(1.00 0 0);
  --color-secondary: oklch(0.92 0.02 162.48);
  --color-secondary-foreground: oklch(0.43 0.05 162.48);
  --color-accent: oklch(0.92 0.02 162.48);
  --color-accent-foreground: oklch(0.27 0.05 162.48);
  --color-background: oklch(0.98 0.01 162.48);
  --color-foreground: oklch(0.34 0.03 162.48);
  --color-muted: oklch(0.93 0.02 162.48);
  --color-muted-foreground: oklch(0.61 0.02 162.48);
  --color-border: oklch(0.88 0.02 162.48);
  --color-card: oklch(0.98 0.01 162.48);
  --color-card-foreground: oklch(0.19 0.02 162.48);
  --color-popover: oklch(1.00 0 0);
  --color-popover-foreground: oklch(0.27 0.05 162.48);
}

[data-theme="emerald"].dark {
  --color-primary: oklch(0.67 0.15 162.48);
  --color-primary-foreground: oklch(1.00 0 0);
  --color-secondary: oklch(0.98 0.01 162.48);
  --color-secondary-foreground: oklch(0.31 0.02 162.48);
  --color-accent: oklch(0.21 0.02 162.48);
  --color-accent-foreground: oklch(0.97 0.01 162.48);
  --color-background: oklch(0.27 0.01 162.48);
  --color-foreground: oklch(0.81 0.02 162.48);
  --color-muted: oklch(0.22 0.01 162.48);
  --color-muted-foreground: oklch(0.77 0.02 162.48);
  --color-border: oklch(0.36 0.02 162.48);
  --color-card: oklch(0.27 0.01 162.48);
  --color-card-foreground: oklch(0.98 0.01 162.48);
  --color-popover: oklch(0.31 0.02 162.48);
  --color-popover-foreground: oklch(0.92 0.02 162.48);
}

/* Rose 主题 */
[data-theme="rose"] {
  --color-primary: oklch(0.61 0.15 12.57);
  --color-primary-foreground: oklch(1.00 0 0);
  --color-secondary: oklch(0.92 0.02 12.57);
  --color-secondary-foreground: oklch(0.43 0.05 12.57);
  --color-accent: oklch(0.92 0.02 12.57);
  --color-accent-foreground: oklch(0.27 0.05 12.57);
  --color-background: oklch(0.98 0.01 12.57);
  --color-foreground: oklch(0.34 0.03 12.57);
  --color-muted: oklch(0.93 0.02 12.57);
  --color-muted-foreground: oklch(0.61 0.02 12.57);
  --color-border: oklch(0.88 0.02 12.57);
  --color-card: oklch(0.98 0.01 12.57);
  --color-card-foreground: oklch(0.19 0.02 12.57);
  --color-popover: oklch(1.00 0 0);
  --color-popover-foreground: oklch(0.27 0.05 12.57);
}

[data-theme="rose"].dark {
  --color-primary: oklch(0.67 0.15 12.57);
  --color-primary-foreground: oklch(1.00 0 0);
  --color-secondary: oklch(0.98 0.01 12.57);
  --color-secondary-foreground: oklch(0.31 0.02 12.57);
  --color-accent: oklch(0.21 0.02 12.57);
  --color-accent-foreground: oklch(0.97 0.01 12.57);
  --color-background: oklch(0.27 0.01 12.57);
  --color-foreground: oklch(0.81 0.02 12.57);
  --color-muted: oklch(0.22 0.01 12.57);
  --color-muted-foreground: oklch(0.77 0.02 12.57);
  --color-border: oklch(0.36 0.02 12.57);
  --color-card: oklch(0.27 0.01 12.57);
  --color-card-foreground: oklch(0.98 0.01 12.57);
  --color-popover: oklch(0.31 0.02 12.57);
  --color-popover-foreground: oklch(0.92 0.02 12.57);
}

/* Forest 主题 */
[data-theme="forest"] {
  --color-primary: oklch(0.61 0.15 142.48);
  --color-primary-foreground: oklch(1.00 0 0);
  --color-secondary: oklch(0.92 0.02 142.48);
  --color-secondary-foreground: oklch(0.43 0.05 142.48);
  --color-accent: oklch(0.92 0.02 142.48);
  --color-accent-foreground: oklch(0.27 0.05 142.48);
  --color-background: oklch(0.98 0.01 142.48);
  --color-foreground: oklch(0.34 0.03 142.48);
  --color-muted: oklch(0.93 0.02 142.48);
  --color-muted-foreground: oklch(0.61 0.02 142.48);
  --color-border: oklch(0.88 0.02 142.48);
  --color-card: oklch(0.98 0.01 142.48);
  --color-card-foreground: oklch(0.19 0.02 142.48);
  --color-popover: oklch(1.00 0 0);
  --color-popover-foreground: oklch(0.27 0.05 142.48);
}

[data-theme="forest"].dark {
  --color-primary: oklch(0.67 0.15 142.48);
  --color-primary-foreground: oklch(1.00 0 0);
  --color-secondary: oklch(0.98 0.01 142.48);
  --color-secondary-foreground: oklch(0.31 0.02 142.48);
  --color-accent: oklch(0.21 0.02 142.48);
  --color-accent-foreground: oklch(0.97 0.01 142.48);
  --color-background: oklch(0.27 0.01 142.48);
  --color-foreground: oklch(0.81 0.02 142.48);
  --color-muted: oklch(0.22 0.01 142.48);
  --color-muted-foreground: oklch(0.77 0.02 142.48);
  --color-border: oklch(0.36 0.02 142.48);
  --color-card: oklch(0.27 0.01 142.48);
  --color-card-foreground: oklch(0.98 0.01 142.48);
  --color-popover: oklch(0.31 0.02 142.48);
  --color-popover-foreground: oklch(0.92 0.02 142.48);
}

/* Vercel 主题 */
[data-theme="vercel"] {
  --color-primary: oklch(0.00 0 0);
  --color-primary-foreground: oklch(1.00 0 0);
  --color-secondary: oklch(0.96 0.01 264.542);
  --color-secondary-foreground: oklch(0.21 0.034 264.665);
  --color-accent: oklch(0.96 0.01 264.542);
  --color-accent-foreground: oklch(0.21 0.034 264.665);
  --color-background: oklch(1.00 0 0);
  --color-foreground: oklch(0.09 0 0);
  --color-muted: oklch(0.96 0.01 264.542);
  --color-muted-foreground: oklch(0.45 0.03 256.802);
  --color-border: oklch(0.89 0.006 264.531);
  --color-card: oklch(1.00 0 0);
  --color-card-foreground: oklch(0.09 0 0);
  --color-popover: oklch(1.00 0 0);
  --color-popover-foreground: oklch(0.09 0 0);
}

[data-theme="vercel"].dark {
  --color-primary: oklch(1.00 0 0);
  --color-primary-foreground: oklch(0.00 0 0);
  --color-secondary: oklch(0.13 0.028 261.692);
  --color-secondary-foreground: oklch(0.985 0.002 247.839);
  --color-accent: oklch(0.13 0.028 261.692);
  --color-accent-foreground: oklch(0.985 0.002 247.839);
  --color-background: oklch(0.00 0 0);
  --color-foreground: oklch(0.985 0.002 247.839);
  --color-muted: oklch(0.13 0.028 261.692);
  --color-muted-foreground: oklch(0.55 0.027 264.364);
  --color-border: oklch(0.21 0.034 264.665);
  --color-card: oklch(0.00 0 0);
  --color-card-foreground: oklch(0.985 0.002 247.839);
  --color-popover: oklch(0.13 0.028 261.692);
  --color-popover-foreground: oklch(0.985 0.002 247.839);
}

/* Spotify 主题 */
[data-theme="spotify"] {
  --color-primary: oklch(0.64 0.20 145.77);
  --color-primary-foreground: oklch(0.00 0 0);
  --color-secondary: oklch(0.95 0.01 145.77);
  --color-secondary-foreground: oklch(0.21 0.034 264.665);
  --color-accent: oklch(0.95 0.01 145.77);
  --color-accent-foreground: oklch(0.21 0.034 264.665);
  --color-background: oklch(1.00 0 0);
  --color-foreground: oklch(0.09 0 0);
  --color-muted: oklch(0.95 0.01 145.77);
  --color-muted-foreground: oklch(0.45 0.03 256.802);
  --color-border: oklch(0.89 0.006 264.531);
  --color-card: oklch(1.00 0 0);
  --color-card-foreground: oklch(0.09 0 0);
  --color-popover: oklch(1.00 0 0);
  --color-popover-foreground: oklch(0.09 0 0);
}

[data-theme="spotify"].dark {
  --color-primary: oklch(0.64 0.20 145.77);
  --color-primary-foreground: oklch(0.00 0 0);
  --color-secondary: oklch(0.18 0.01 145.77);
  --color-secondary-foreground: oklch(0.985 0.002 247.839);
  --color-accent: oklch(0.18 0.01 145.77);
  --color-accent-foreground: oklch(0.985 0.002 247.839);
  --color-background: oklch(0.07 0 0);
  --color-foreground: oklch(0.985 0.002 247.839);
  --color-muted: oklch(0.18 0.01 145.77);
  --color-muted-foreground: oklch(0.65 0.01 145.77);
  --color-border: oklch(0.25 0.01 145.77);
  --color-card: oklch(0.07 0 0);
  --color-card-foreground: oklch(0.985 0.002 247.839);
  --color-popover: oklch(0.18 0.01 145.77);
  --color-popover-foreground: oklch(0.985 0.002 247.839);
}

/* Airbnb 主题 */
[data-theme="airbnb"] {
  --color-primary: oklch(0.58 0.20 12.57);
  --color-primary-foreground: oklch(1.00 0 0);
  --color-secondary: oklch(0.96 0.01 12.57);
  --color-secondary-foreground: oklch(0.21 0.034 264.665);
  --color-accent: oklch(0.96 0.01 12.57);
  --color-accent-foreground: oklch(0.21 0.034 264.665);
  --color-background: oklch(1.00 0 0);
  --color-foreground: oklch(0.22 0.01 12.57);
  --color-muted: oklch(0.96 0.01 12.57);
  --color-muted-foreground: oklch(0.45 0.03 256.802);
  --color-border: oklch(0.89 0.006 264.531);
  --color-card: oklch(1.00 0 0);
  --color-card-foreground: oklch(0.22 0.01 12.57);
  --color-popover: oklch(1.00 0 0);
  --color-popover-foreground: oklch(0.22 0.01 12.57);
}

[data-theme="airbnb"].dark {
  --color-primary: oklch(0.65 0.18 12.57);
  --color-primary-foreground: oklch(1.00 0 0);
  --color-secondary: oklch(0.18 0.01 12.57);
  --color-secondary-foreground: oklch(0.985 0.002 247.839);
  --color-accent: oklch(0.18 0.01 12.57);
  --color-accent-foreground: oklch(0.985 0.002 247.839);
  --color-background: oklch(0.08 0.01 12.57);
  --color-foreground: oklch(0.985 0.002 247.839);
  --color-muted: oklch(0.18 0.01 12.57);
  --color-muted-foreground: oklch(0.65 0.01 12.57);
  --color-border: oklch(0.25 0.01 12.57);
  --color-card: oklch(0.08 0.01 12.57);
  --color-card-foreground: oklch(0.985 0.002 247.839);
  --color-popover: oklch(0.18 0.01 12.57);
  --color-popover-foreground: oklch(0.985 0.002 247.839);
}


/* Tailwind 主题变量映射 - 确保 Tailwind 工具类可以访问动态主题变量 */
@theme inline {
  --color-primary: var(--color-primary);
  --color-primary-foreground: var(--color-primary-foreground);
  --color-secondary: var(--color-secondary);
  --color-secondary-foreground: var(--color-secondary-foreground);
  --color-accent: var(--color-accent);
  --color-accent-foreground: var(--color-accent-foreground);
  --color-background: var(--color-background);
  --color-foreground: var(--color-foreground);
  --color-muted: var(--color-muted);
  --color-muted-foreground: var(--color-muted-foreground);
  --color-border: var(--color-border);
  --color-card: var(--color-card);
  --color-card-foreground: var(--color-card-foreground);
  --color-popover: var(--color-popover);
  --color-popover-foreground: var(--color-popover-foreground);

  /* Alert 颜色映射 */
  --color-note: var(--color-note);
  --color-tip: var(--color-tip);
  --color-important: var(--color-important);
  --color-warning: var(--color-warning);
  --color-caution: var(--color-caution);
}

/* 自定义 Prose Typography */
@layer utilities {
  .prose {
    /* 基础文本样式 */
    --tw-prose-body: var(--color-foreground);
    --tw-prose-headings: var(--color-foreground);
    --tw-prose-lead: var(--color-muted-foreground);
    --tw-prose-links: var(--color-primary);
    --tw-prose-bold: var(--color-foreground);
    --tw-prose-counters: var(--color-muted-foreground);
    --tw-prose-bullets: var(--color-muted-foreground);
    --tw-prose-hr: var(--color-border);
    --tw-prose-quotes: var(--color-foreground);
    --tw-prose-quote-borders: var(--color-border);
    --tw-prose-captions: var(--color-muted-foreground);
    --tw-prose-code: var(--color-foreground);
    --tw-prose-pre-code: var(--color-muted-foreground);
    --tw-prose-pre-bg: var(--color-muted);
    --tw-prose-th-borders: var(--color-border);
    --tw-prose-td-borders: var(--color-border);

    /* 字体和间距 */
    font-family: ui-sans-serif, system-ui, sans-serif;
    line-height: 1.7;
    font-size: 1rem;
    max-width: none;
  }

  /* 标题样式 */
  .prose h1 {
    @apply scroll-m-20 text-4xl font-bold tracking-tight lg:text-5xl;
    margin-top: 2rem;
    margin-bottom: 1rem;
    color: var(--tw-prose-headings);
    position: relative;
  }

  .prose h1::after {
    content: '';
    position: absolute;
    bottom: -0.5rem;
    left: 0;
    width: 3rem;
    height: 3px;
    background: linear-gradient(90deg, var(--color-primary), transparent);
    border-radius: 2px;
  }

  .prose h2 {
    @apply scroll-m-20 text-3xl font-semibold tracking-tight;
    margin-top: 2rem;
    margin-bottom: 1rem;
    color: var(--tw-prose-headings);
    position: relative;
    padding-left: 1rem;
  }

  .prose h2::before {
    content: '';
    position: absolute;
    left: 0;
    top: 0.25rem;
    width: 4px;
    height: 1.5rem;
    background: var(--color-primary);
    border-radius: 2px;
  }

  .prose h3 {
    @apply scroll-m-20 text-2xl font-semibold tracking-tight;
    margin-top: 1.5rem;
    margin-bottom: 0.75rem;
    color: var(--tw-prose-headings);
  }

  .prose h4 {
    @apply scroll-m-20 text-xl font-semibold tracking-tight;
    margin-top: 0.5rem;
    margin-bottom: 0.5rem;
    color: var(--tw-prose-headings);
  }

  /* 段落和文本 */
  .prose p {
    @apply leading-7;
    margin-top: 1.25rem;
    margin-bottom: 1.25rem;
    color: var(--tw-prose-body);
  }

  .prose p:first-child {
    margin-top: 0;
  }

  .prose p:last-child {
    margin-bottom: 0;
  }

  /* 引用块 */
  .prose blockquote {
    @apply border-l-4 pl-6 italic;
    border-left-color: var(--color-primary);
    background: color-mix(in srgb, var(--color-muted) 30%, transparent);
    margin: 1.5rem 0;
    padding: 1rem 1.5rem;
    border-radius: 0.75rem; /* 添加圆角，使其更圆润 */
    border-top-left-radius: 0; /* 保持左上角直角以配合左边框 */
    border-bottom-left-radius: 0; /* 保持左下角直角以配合左边框 */
    position: relative;
  }

  .prose blockquote::before {
    content: '"';
    font-size: 4rem;
    color: color-mix(in srgb, var(--color-primary) 20%, transparent);
    position: absolute;
    top: -0.5rem;
    left: 1rem;
    font-family: serif;
    line-height: 1;
  }

  .prose blockquote p {
    margin: 0;
    font-style: italic;
    font-size: 1.1rem;
    color: var(--tw-prose-quotes);
  }

  /* 链接样式 */
  .prose a {
    color: var(--tw-prose-links);
    text-decoration: none;
    font-weight: 500;
    position: relative;
    transition: all 0.3s ease;
    background: linear-gradient(
      to bottom,
      transparent 50%,
      color-mix(in srgb, var(--color-primary) 15%, transparent) 50%
    );
    background-size: 100% 200%;
    background-position: 0 0;
  }

  .prose a::after {
    content: '';
    position: absolute;
    bottom: -2px;
    left: 0;
    width: 0;
    height: 2px;
    background: var(--color-primary);
    transition: width 0.3s ease;
  }

  .prose a:hover {
    color: var(--color-primary);
    background-position: 0 100%;
  }

  .prose a:hover::after {
    width: 100%;
  }

  /* 列表样式 */
  .prose ul {
    list-style: none;
    padding-left: 0;
    margin: 1.25rem 0;
  }

  .prose ul li {
    position: relative;
    padding-left: 1rem;
    margin: 0.5rem 0.6rem;
    color: var(--tw-prose-body);
  }

  .prose ul li::before {
    content: '';
    position: absolute;
    left: 0;
    top: 0.75rem;
    width: 6px;
    height: 6px;
    background: var(--color-primary);
    border-radius: 50%;
  }

  .prose ol {
    counter-reset: item;
    padding-left: 0;
    margin: 1.25rem 0;
    list-style: none; /* 隐藏默认的数字序号 */
  }

  .prose ol li {
    position: relative;
    padding-left: 2rem;
    margin: 0.5rem 0.6rem;
    counter-increment: item;
    color: var(--tw-prose-body);
  }

  .prose ol li::before {
    content: counter(item);
    position: absolute;
    left: 0;
    top: 0.2rem;
    background: var(--color-primary);
    color: white;
    width: 1.25rem;
    height: 1.25rem;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.75rem;
    font-weight: bold;
    line-height: 1; /* 确保数字垂直居中 */
  }

  /* 代码样式 */
  .prose code {
    @apply rounded bg-muted px-1.5 py-0.5 text-sm font-mono;
    color: var(--tw-prose-code);
    font-weight: 600;
  }

  /* 代码块样式 - 与 render hook 和 Chroma 配合 */
  .code-block-container {
    margin: 1.5rem 0;
  }

  /* Chroma 生成的代码块样式 */
  .code-block-content .chroma {
    @apply p-4 overflow-x-auto text-sm font-mono;
    margin: 0;
    border: none;
    border-radius: 0;
    background: transparent !important; /* 让主题背景生效 */
  }

  .code-block-content .chroma pre {
    margin: 0;
    padding: 0;
    background: transparent;
    border: none;
    overflow: visible;
  }

  .code-block-content .chroma code {
    @apply bg-transparent p-0;
    font-weight: normal;
    font-family: inherit;
    background: transparent;
  }

  /* 内联行号样式 */
  .code-block-content .chroma .ln {
    user-select: none;  /* 行号不可选择 */
    margin-right: 0.4em;
    padding: 0 0.4em 0 0.4em;
    color: var(--chroma-ln, #7f7f7f);
  }

  .code-block-content .chroma .line {
    display: flex;
  }

  .code-block-content .chroma .cl {
    flex: 1;
  }

  /* 代码块折叠功能样式 */
  .collapse-overlay {
    cursor: pointer;
    transition: opacity 0.3s ease;
  }

  .collapse-overlay:hover {
    backdrop-filter: blur(1px);
  }

  .collapse-overlay > div {
    transition: transform 0.2s ease;
  }

  .collapse-overlay:hover > div {
    transform: translateX(-50%) scale(1.05);
  }

  /* 折叠状态下的代码块内容 */
  .code-block-content {
    transition: max-height 0.3s ease-out;
  }

  /* 内联代码样式保持不变 */
  .prose code:not(.chroma code) {
    @apply rounded bg-muted px-1.5 py-0.5 text-sm font-mono;
    color: var(--tw-prose-code);
    font-weight: 600;
  }

  /* 传统 pre 样式（作为后备） */
  .prose pre:not(.chroma) {
    @apply rounded-lg p-4 overflow-x-auto;
    background: var(--tw-prose-pre-bg);
    border: 1px solid var(--color-border);
    margin: 1.5rem 0;
    position: relative;
  }

  .prose pre:not(.chroma) code {
    @apply bg-transparent p-0 text-sm;
    color: var(--tw-prose-pre-code);
    font-weight: normal;
  }

  /* 表格样式 */
  .prose table {
    @apply w-full border-collapse;
    margin: 1.5rem 0;
    border-radius: 0.5rem;
    overflow: hidden;
    border: 1px solid var(--color-border);
    box-shadow: 0 1px 3px 0 color-mix(in srgb, var(--color-foreground) 10%, transparent);
  }

  .prose th {
    @apply bg-muted px-4 py-3 text-left font-semibold;
    color: var(--tw-prose-headings);
    border-bottom: 1px solid var(--tw-prose-th-borders);
    background: color-mix(in srgb, var(--color-primary) 5%, var(--color-muted));
  }

  .prose td {
    @apply px-4 py-3 border-b;
    border-bottom-color: var(--tw-prose-td-borders);
    color: var(--tw-prose-body);
  }

  .prose tr:last-child td {
    border-bottom: none;
  }

  .prose tr:hover td {
    background: color-mix(in srgb, var(--color-muted) 50%, transparent);
  }

  /* 分隔线 */
  .prose hr {
    @apply my-8 border-0 h-px bg-gradient-to-r from-transparent via-border to-transparent;
  }

  /* 文本截断样式 */
  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .line-clamp-3 {
    display: -webkit-box;
    -webkit-line-clamp: 3;
    line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  /* 图片样式 */
  .prose img {
    @apply rounded-lg mx-auto shadow-md;
    margin: 2rem 0;
    max-width: 100%;
    height: auto;
  }

  .prose figure {
    margin: 2rem 0;
  }

  .prose figcaption {
    @apply text-center text-sm mt-2;
    color: var(--tw-prose-captions);
    font-style: italic;
  }

  /* 强调文本 */
  .prose strong {
    color: var(--tw-prose-bold);
    font-weight: 600;
  }

  .prose em {
    font-style: italic;
    color: var(--tw-prose-body);
  }

  /* 语法高亮主题适配 */
  .code-block-container {
    /* 代码块容器背景适配主题 */
    background: var(--color-card);
  }

  .code-block-content {
    /* 代码块内容背景适配主题 */
    background: color-mix(in srgb, var(--color-muted) 30%, transparent);
  }

  /* 确保 chroma 背景与主题一致 */
  .code-block-content .chroma {
    background-color: transparent !important;
  }

  /* 暗色模式下的代码块背景 */
  .dark .code-block-content {
    background: color-mix(in srgb, var(--color-muted) 50%, transparent);
  }

  /* Alert 样式 - 通过 render hook 实现，这里只保留基础样式 */

  /* 响应式调整 */
  @media (max-width: 640px) {
    .prose {
      font-size: 0.9rem;
    }

    .prose h1 {
      @apply text-3xl;
    }

    .prose h2 {
      @apply text-2xl;
    }

    .prose h3 {
      @apply text-xl;
    }
  }
}


@layer components {
  /* 移动端菜单动画 - 保留关键帧 */
  @keyframes slideDown {
    from {
      opacity: 0;
      transform: translateY(-10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .mobile-menu {
    animation: slideDown 0.3s ease-out;
  }


  .search-result-selected {
    background-color: color-mix(in srgb, var(--color-primary) 10%, transparent) !important;
    color: var(--color-primary) !important;
  }






  /* Scrollbar hide utility */
  .scrollbar-hide {
    scrollbar-width: none;
    -ms-overflow-style: none;
  }

  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }



  /* 超小屏幕文字隐藏 - 通过 Tailwind 类实现大部分功能 */
  @media (max-width: 480px) {
    #dock span {
      display: none !important;
    }
  }

  /* 目录卡片样式 */
  #toc-overlay {
    backdrop-filter: blur(4px);
    -webkit-backdrop-filter: blur(4px);
  }

  #toc-card {
    max-height: 80vh;
  }

  /* Hugo 生成的目录样式 */
  #toc-content nav {
    font-size: 0.875rem;
    line-height: 1.5;
  }

  #toc-content ul {
    list-style: none;
    margin: 0;
    padding: 0;
  }

  #toc-content li {
    margin: 0.25rem 0;
    padding: 0;
  }

  #toc-content a {
    display: block;
    padding: 0.75rem 1rem;
    color: hsl(var(--muted-foreground));
    text-decoration: none;
    border-radius: 0.5rem;
    transition: all 0.2s ease;
    border-left: 2px solid transparent;
    position: relative;
  }

  #toc-content a:hover {
    background-color: color-mix(in srgb, var(--color-primary) 10%, transparent);
    color: var(--color-primary);
    transform: translateX(2px) translateY(-1px) scale(1.02);
  }

  /* Gumshoe 添加的 active 类样式 */
  #toc-content a.active,
  #toc-content li.active > a {
    background: linear-gradient(135deg, hsl(var(--primary) / 0.15), hsl(var(--primary) / 0.05)) !important;
    color: hsl(var(--primary)) !important;
    border-left: 3px solid hsl(var(--primary)) !important;
    border-radius: 0.5rem 0.75rem 0.75rem 0.5rem !important;
    font-weight: 600 !important;
    box-shadow: 0 2px 8px hsl(var(--primary) / 0.2) !important;
    transform: translateX(2px) !important;
  }

  #toc-content a.active::before,
  #toc-content li.active > a::before {
    content: '';
    position: absolute;
    left: -3px;
    top: 0;
    bottom: 0;
    width: 3px;
    background: linear-gradient(to bottom, hsl(var(--primary)), hsl(var(--primary) / 0.7));
    border-radius: 0 2px 2px 0;
  }

  #toc-content a.active::after,
  #toc-content li.active > a::after {
    content: '●';
    position: absolute;
    right: 0.75rem;
    top: 50%;
    transform: translateY(-50%);
    color: hsl(var(--primary));
    font-size: 0.5rem;
    opacity: 0.7;
  }

  /* 嵌套目录缩进 */
  #toc-content ul ul a {
    padding-left: 1.5rem;
  }

  #toc-content ul ul ul a {
    padding-left: 2rem;
  }

  #toc-content ul ul ul ul a {
    padding-left: 2.5rem;
  }

  #toc-content ul ul ul ul ul a {
    padding-left: 3rem;
  }

  #toc-content ul ul ul ul ul ul a {
    padding-left: 3.5rem;
  }

  /* 目录滚动条样式 */
  #toc-nav {
    scrollbar-width: thin;
    scrollbar-color: var(--color-border) transparent;
  }

  #toc-nav::-webkit-scrollbar {
    width: 6px;
  }

  #toc-nav::-webkit-scrollbar-track {
    background: transparent;
  }

  #toc-nav::-webkit-scrollbar-thumb {
    background-color: var(--color-border);
    border-radius: 3px;
  }

  #toc-nav::-webkit-scrollbar-thumb:hover {
    background-color: var(--color-muted-foreground);
  }
 
}

{{/*
  面包屑导航组件
  
  显示当前页面的导航路径
  
  @context {page} . 当前页面对象
*/}}

<nav class="breadcrumb mb-6" aria-label="{{ i18n "nav.breadcrumb" | default "面包屑导航" }}">
  <ol class="flex items-center space-x-2 text-sm text-muted-foreground">
    
    <!-- 首页链接 -->
    <li>
      <a href="{{ "/" | relURL }}" class="text-muted-foreground hover:text-primary hover:bg-primary/10
         transition-all duration-200 ease-out hover:-translate-y-0.5 hover:scale-105
         flex items-center gap-1 rounded-lg px-2 py-1">
        {{ partial "icon.html" (dict "name" "home" "size" "sm" "ariaLabel" (i18n "nav.home")) }}
        <span>{{ i18n "nav.home" | default "首页" }}</span>
      </a>
    </li>
    
    <!-- 分隔符和当前页面 -->
    {{ if not .IsHome }}
      <li class="flex items-center gap-2">
        <span class="text-muted-foreground/50">{{ partial "icon.html" (dict "name" "chevron-right" "size" "sm" "ariaLabel" "") }}</span>
        
        {{ if .IsSection }}
          <!-- 分区页面 (如 posts 列表页) -->
          <span class="font-medium text-foreground">
            {{ if eq .Section "posts" }}
              {{ i18n "nav.posts" | default "文章" }}
              
            {{ else if eq .Section "archives" }}
              {{ i18n "nav.archives" | default "归档" }}
            {{ else if eq .Section "tags" }}
              {{ i18n "nav.tags" | default "标签" }}
            {{ else if eq .Section "categories" }}
              {{ i18n "nav.categories" | default "分类" }}
            {{ else }}
              {{ .Title }}
            {{ end }}
          </span>
        {{ else if .IsPage }}
          <!-- 单页面 -->
          {{ if ne .Section "" }}
            <!-- 有分区的页面，先显示分区链接 -->
            <a href="{{ .Section | relURL }}" class="text-muted-foreground hover:text-primary hover:bg-primary/10
               transition-all duration-200 ease-out hover:-translate-y-0.5 hover:scale-105
               rounded-lg px-2 py-1 flex items-center gap-1">
              {{ if eq .Section "posts" }}
                {{ partial "icon.html" (dict "name" "file-text" "size" "sm" "ariaLabel" "") }}
                {{ i18n "nav.posts" | default "文章" }}
              {{ else if eq .Section "archives" }}
                {{ partial "icon.html" (dict "name" "archive" "size" "sm" "ariaLabel" "") }}
                {{ i18n "nav.archives" | default "归档" }}
              {{ else }}
                {{ partial "icon.html" (dict "name" "folder" "size" "sm" "ariaLabel" "") }}
                {{ .Section | title }}
              {{ end }}
            </a>
            <span class="text-muted-foreground/50 mx-2">{{ partial "icon.html" (dict "name" "chevron-right" "size" "sm" "ariaLabel" "") }}</span>
          {{ end }}
          <span class="font-medium text-foreground line-clamp-1">{{ .Title }}</span>
        {{ else if .IsNode }}
          <!-- 其他节点页面 -->
          <span class="font-medium text-foreground">{{ .Title }}</span>
        {{ end }}
      </li>
    {{ end }}
    
  </ol>
</nav>

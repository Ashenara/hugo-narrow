{{- if site.Params.showDarkModeSwitch | default true -}}
<!-- 明暗模式切换按钮 -->
<div class="relative">
  <button
    id="theme-toggle"
    class="dropdown-toggle border-border bg-background text-muted-foreground hover:text-primary hover:bg-primary/10 focus:ring-primary/20 flex h-10 w-10 items-center justify-center rounded-lg border transition-all duration-300 ease-out hover:scale-105 focus:ring-2 focus:outline-none active:scale-95"
    data-dropdown-type="theme"
    aria-label="{{ i18n "theme.toggle" }}">
    <!-- 太阳图标 (亮色模式) -->
    {{ partial "icon.html" (dict "name" "sun" "id" "sun-icon" "class" "hidden relative z-10" "size" "md" "ariaLabel" (i18n "theme.light")) }}
    <!-- 月亮图标 (暗色模式) -->
    {{ partial "icon.html" (dict "name" "moon" "id" "moon-icon" "class" "hidden relative z-10" "size" "md" "ariaLabel" (i18n "theme.dark")) }}
    <!-- 系统图标 (跟随系统) -->
    {{ partial "icon.html" (dict "name" "monitor" "id" "system-icon" "class" "hidden relative z-10" "size" "md" "ariaLabel" (i18n "theme.system")) }}
  </button>

  <!-- 明暗模式选择下拉菜单 -->
  <div
    id="theme-dropdown"
    class="dropdown-menu border-border bg-popover/95 absolute top-12 right-0 z-[60] hidden w-40 rounded-lg border p-1 shadow-lg backdrop-blur-sm transition-all duration-200 ease-out"
    data-dropdown-type="theme">
    <button
      data-theme="light"
      class="text-accent-foreground hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground flex w-full items-center rounded-md px-4 py-2 text-sm transition-all duration-200 ease-out focus:outline-none">
      {{ partial "icon.html" (dict "name" "sun" "class" "mr-3 h-4 w-4" "size" "md" "ariaLabel" (i18n "theme.light")) }}
      <span>{{ i18n "theme.light" }}</span>
    </button>
    <button
      data-theme="dark"
      class="text-accent-foreground hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground flex w-full items-center rounded-md px-4 py-2 text-sm transition-all duration-200 ease-out focus:outline-none">
      {{ partial "icon.html" (dict "name" "moon" "class" "mr-3 h-4 w-4" "size" "md" "ariaLabel" (i18n "theme.dark")) }}
      <span>{{ i18n "theme.dark" }}</span>
    </button>
    <button
      data-theme="system"
      class="text-accent-foreground hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground flex w-full items-center rounded-md px-4 py-2 text-sm transition-all duration-200 ease-out focus:outline-none">
      {{ partial "icon.html" (dict "name" "monitor" "class" "mr-3 h-4 w-4" "size" "md" "ariaLabel" (i18n "theme.system")) }}
      <span>{{ i18n "theme.system" }}</span>
    </button>
  </div>
</div>
{{- end -}}
